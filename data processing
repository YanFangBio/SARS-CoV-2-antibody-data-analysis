# Recover DNA Barcode
pip install CITE-seq-Count==1.4.3
cd /Users/yanfang/data_WFH/LIBRAseq/SeqData/BCR_DNA/
CITE-seq-Count -R1 /SeqData/BCR_DNA/BCR_DNA_CKDL200162261-1a_HJM25DSXY_L1_1.fq.gz -R2 /SeqData/BCR_DNA/BCR_DNA_CKDL200162261-1a_HJM25DSXY_L1_2.fq.gz -t /SeqData/BCR_DNA/tagsexcel.csv -cbf 1 -cbl 16 -umif 17 -umil 26 -cells 1500 -o /SeqData/BCR_DNA/CITEseqCountResult/

# Alignment and cell barcode recover
## Download cellranger 4.0.0
## Download GRCm38 Reference - 4.0.0 (July 7, 2020)
curl -o cellranger-4.0.0.tar.gz "https://cf.10xgenomics.com/releases/cell-vdj/cellranger-4.0.0.tar.gz?Expires=1601525238&Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jZi4xMHhnZW5vbWljcy5jb20vcmVsZWFzZXMvY2VsbC12ZGovY2VsbHJhbmdlci00LjAuMC50YXIuZ3oiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE2MDE1MjUyMzh9fX1dfQ__&Signature=NEGcGxv9CsVV3Ljo-hWXXFrDzRDnDQpklmEMeuOXEK4mU-Rn52gz-aCvtgMoXm27sAwEiQTpoF4omoEP-4MDtWhVzongqizgOPPtRw4xzEaiuRSxcsgrpSy6rA-Lrnw17RaQTZ35p6tXxMcX2aBNz8XQDkJLk3hSUXBvTJf3VvmS~qoU3nmB~zc5B7pMapqKL4C3NCJFxnk729bHhN0hmRPQkHH0VeDEwZezvaWgaDu885OdILw9xOWkHgnxtXJY9UQjYY27u5Pjr8M3xKhM9x0YAfYMXrByoV~us6w1nHcS35PcYOxg6Gv0Jon9OUlGHrhvkHIQgqsfwSXBAwKcWQ__&Key-Pair-Id=APKAI7S6A5RYOXBWRPDA" curl -O https://cf.10xgenomics.com/supp/cell-exp/refdata-gex-mm10-2020-A.tar.gz
## Cell Ranger Installation
tar -xzvf cellranger-4.0.0.tar.gz tar -xzvf refdata-gex-mm10-2020-A.tar.gz
##Process
cellranger vdj --id=BCR --reference=/Data/refdata-cellranger-vdj-GRCm38-alts-ensembl-4.0.0 --fastqs=/LIBRAseq/BCR/fastq/ungz --sample=BCR_CKDL200162260-1a-SI_GA_B5_HJM25DSXY --localcores=40 --localmem=256

# Changeo BCR clone asign
docker run -v $HOME/project:/data:z immcantation/suite:4.1.0 versions report immcantation: 4.1.0 cd /SeqData/BCR/BCR/outs/
## upload dir to docker
docker run -it --workdir /data -v $(pwd):/data:z immcantation/suite:4.1.0 bash
## Run 10x pipline
changeo-10x -s filtered_contig.fasta -a filtered_contig_annotations.csv -o ./changeo/ -g mouse -t ig -x 0.08 https://immcantation.readthedocs.io/en/stable/tutorials/10x_tutorial.html
